<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artista | VÉRTICE</title>
    <link rel="stylesheet" href="../../assets/css/base/reset.css">
    <link rel="stylesheet" href="../../assets/css/base/variables.css">
    <link rel="stylesheet" href="../../assets/css/base/typography.css">
    <link rel="stylesheet" href="../../assets/css/components/navbar.css">
    <link rel="stylesheet" href="../../assets/css/components/footer.css">
    <link rel="stylesheet" href="../../assets/css/components/cards.css">
    <link rel="stylesheet" href="../../assets/css/components/buttons.css">
    <link rel="stylesheet" href="../../assets/css/pages/detalle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div id="navbar-placeholder"></div>

    <main class="artist-detail-container">
        <section class="artist-hero">
            <div class="artist-bio-panel">
                <span id="disciplina-artista" class="label-superior">Cargando...</span>
                <h1 id="nombre-artista">...</h1>
                <p id="bio-artista" class="bio-texto">Cargando biografía del artista...</p>
                <div class="actions-panel">
                    <button id="follow-btn" class="btn-artista-follow">SEGUIR ARTISTA</button>
                </div>
            </div>
            <div class="artist-portrait-panel">
                <div class="portrait-frame">
                    <img id="imagen-artista" src="" alt="Artista">
                </div>
            </div>
        </section>

        <h2 class="artist-works-title">OBRAS EN EXHIBICIÓN</h2>

        <section class="works-grid" id="obras-artista-grid">
            <!-- Se rellena dinámicamente -->
        </section>
    </main>

    <div id="footer-placeholder"></div>

    <script type="module" src="../../assets/js/services/dataLoader.js"></script>
    <script type="module" src="../../assets/js/components/layout.js"></script>
    <script type="module" src="../../assets/js/pages/details.js"></script>
    <script type="module" src="../../assets/js/main.js"></script>

    <script type="module">
        import DataLoader from '../../assets/js/services/dataLoader.js';

        // Lógica de seguimiento
        document.addEventListener('DOMContentLoaded', async () => {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            if (!id) return;

            const btn = document.getElementById('follow-btn');
            if (btn) {
                const checkStatus = () => {
                    if (DataLoader.isFollowingArtist(id)) {
                        btn.textContent = 'SIGUIENDO';
                        btn.classList.add('following');
                    } else {
                        btn.textContent = 'SEGUIR ARTISTA';
                        btn.classList.remove('following');
                    }
                };

                // Esperar un momento para que el usuario se cargue
                setTimeout(checkStatus, 500);

                btn.onclick = () => {
                    const success = DataLoader.toggleFollowArtist(id);
                    if (!success) {
                        if (window.showAuthModal) window.showAuthModal('../../');
                        return;
                    }
                    checkStatus();
                };
            }
        });
    </script>
</body>

</html>